<section class="bg-white rounded-2xl border border-gray-200 shadow-sm mt-6">
  <!-- TÍTULO PREGUNTAS FRECUENTES (PRODUCTO ESPECÍFICO) -->
  <header class="flex items-center gap-2 px-4 py-3 border-b border-gray-200 bg-gray-50 rounded-t-2xl">
    <div
      class="w-7 h-7 flex items-center justify-center rounded-full bg-blue-50 text-blue-600 text-sm">
      <i class="fa-solid fa-circle-question"></i>
    </div>
    <h2 class="text-sm sm:text-base font-bold text-gray-800">
      Preguntas Frecuentes sobre <span id="faq-product-name">Producto</span>
    </h2>
  </header>

  <!-- BLOQUE PREGUNTAS -->
  <div class="p-4 sm:p-5 space-y-3">
    <details class="group border border-blue-300 rounded-xl overflow-hidden" open>
      <summary
        class="flex items-center justify-between px-4 py-2 text-sm font-semibold text-gray-800 bg-blue-50 cursor-pointer">
        <span>¿Qué velocidad máxima ofrece este modelo?</span>
        <i class="fa-solid fa-chevron-down text-xs text-gray-500 group-open:rotate-180 transition-transform"></i>
      </summary>
      <div class="px-4 py-3 text-xs sm:text-sm text-gray-700 bg-white border-t border-blue-100">
        <ul class="list-disc list-inside space-y-1">
          <li>Velocidad agregada típica de hasta <strong>5 Gbps</strong> (según modelo y estándar).</li>
          <li>Optimizado para enlaces de alto rendimiento en redes de datos exigentes.</li>
          <li>Ideal para backbone de edificios, campus y enlaces troncales.</li>
        </ul>
      </div>
    </details>

    <details class="group border border-gray-200 rounded-xl overflow-hidden">
      <summary
        class="flex items-center justify-between px-4 py-2 text-sm font-semibold text-gray-800 bg-gray-50 cursor-pointer">
        <span>¿En qué tipo de instalación se recomienda usarlo?</span>
        <i class="fa-solid fa-chevron-down text-xs text-gray-500 group-open:rotate-180 transition-transform"></i>
      </summary>
      <div class="px-4 py-3 text-xs sm:text-sm text-gray-700 bg-white border-t border-gray-200">
        <ul class="list-disc list-inside space-y-1">
          <li>Troncales entre racks y salas de comunicaciones.</li>
          <li>Interconexión de edificios en campus a través de ductos.</li>
          <li>Proyectos donde se requiera alta densidad de fibras y buena resistencia mecánica.</li>
        </ul>
      </div>
    </details>

    <details class="group border border-gray-200 rounded-xl overflow-hidden">
      <summary
        class="flex items-center justify-between px-4 py-2 text-sm font-semibold text-gray-800 bg-gray-50 cursor-pointer">
        <span>¿La cubierta es apta para interiores y exteriores?</span>
        <i class="fa-solid fa-chevron-down text-xs text-gray-500 group-open:rotate-180 transition-transform"></i>
      </summary>
      <div class="px-4 py-3 text-xs sm:text-sm text-gray-700 bg-white border-t border-gray-200">
        <p>
          Sí, la construcción <strong>Loose Tube</strong> con chaqueta <strong>LSZH</strong> y opción
          de cubierta <strong>PE</strong> permite su uso en ductos interiores y exteriores, ofreciendo
          resistencia a la humedad, aplastamiento y a la tracción.
        </p>
      </div>
    </details>

    <details class="group border border-gray-200 rounded-xl overflow-hidden">
      <summary
        class="flex items-center justify-between px-4 py-2 text-sm font-semibold text-gray-800 bg-gray-50 cursor-pointer">
        <span>¿Se puede suministrar cortado a la medida?</span>
        <i class="fa-solid fa-chevron-down text-xs text-gray-500 group-open:rotate-180 transition-transform"></i>
      </summary>
      <div class="px-4 py-3 text-xs sm:text-sm text-gray-700 bg-white border-t border-gray-200">
        <p>
          Sí, el cable se vende por metro. Podemos ayudarte a definir la longitud adecuada según el trazado
          de tu proyecto y márgenes de reserva recomendados.
        </p>
      </div>
    </details>
  </div>

  <!-- BLOQUE CONSULTA POR WHATSAPP -->
  <div class="border-t border-gray-200 bg-blue-50 px-4 sm:px-5 py-4 sm:py-5 rounded-b-2xl">
    <h3 class="text-sm sm:text-base font-semibold text-gray-900 mb-1">
      ¿Tienes otra pregunta sobre <span id="contact-product-name">Producto</span>?
    </h3>
    <p class="text-xs sm:text-sm text-gray-700 mb-3">
      Envíanos tu consulta y nuestro equipo técnico te responderá en menos de 24 horas.
    </p>

    <div class="mb-3">
      <textarea
        id="faq-question-input"
        rows="3"
        maxlength="500"
        class="w-full text-xs sm:text-sm border border-blue-200 rounded-xl px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"
        placeholder="Ejemplo: ¿Qué tipo de PoE recomiendan? ¿Es adecuado para exteriores? ¿Requiere algún accesorio adicional?"></textarea>
      <div class="flex justify-end mt-1">
        <span id="faq-question-counter" class="text-[11px] text-gray-500">0 / 500</span>
      </div>
    </div>

    <p class="text-[11px] sm:text-xs text-gray-600 mb-3">
      Escribe tu pregunta específica sobre el producto y elige una de las opciones de contacto:
    </p>

    <div class="flex flex-col sm:flex-row gap-2">
      <button
        type="button"
        id="btn-whatsapp-pregunta"
        class="flex-1 inline-flex items-center justify-center gap-2 rounded-full bg-green-500 hover:bg-green-600 text-white text-xs sm:text-sm font-semibold px-4 py-2 shadow-md transition">
        <i class="fa-brands fa-whatsapp text-sm"></i>
        <span>Enviar pregunta por WhatsApp</span>
      </button>

      <button
        type="button"
        id="btn-whatsapp-general"
        class="flex-1 inline-flex items-center justify-center gap-2 rounded-full bg-blue-600 hover:bg-blue-700 text-white text-xs sm:text-sm font-semibold px-4 py-2 shadow-md transition">
        <i class="fa-brands fa-whatsapp text-sm"></i>
        <span>Consulta general</span>
      </button>
    </div>

    <p class="mt-2 text-[11px] text-gray-500 flex items-center gap-1">
      <i class="fa-solid fa-circle-info"></i>
      Al hacer clic en los botones se abrirá WhatsApp con el mensaje pre-llenado; puedes editarlo antes de enviarlo.
    </p>
  </div>
</section>

<script>
  (function () {
    const PRODUCT_NAME = window.PRODUCT_NAME || 'U7-LITE';
    const WHATSAPP_NUMBER = '51937700700'; // 937 700 700

    // Actualizar textos con el nombre del producto
    const titleSpan = document.getElementById('faq-product-name');
    const contactSpan = document.getElementById('contact-product-name');
    if (titleSpan) titleSpan.textContent = PRODUCT_NAME;
    if (contactSpan) contactSpan.textContent = PRODUCT_NAME;

    const textarea = document.getElementById('faq-question-input');
    const counter = document.getElementById('faq-question-counter');
    const maxChars = 500;

    if (textarea && counter) {
      textarea.addEventListener('input', function () {
        let val = textarea.value;
        if (val.length > maxChars) {
          val = val.substring(0, maxChars);
          textarea.value = val;
        }
        const len = val.length;
        counter.textContent = len + ' / ' + maxChars;

        if (len > maxChars * 0.9) {
          counter.classList.add('text-red-600', 'font-medium');
          counter.classList.remove('text-gray-500');
        } else {
          counter.classList.remove('text-red-600', 'font-medium');
          counter.classList.add('text-gray-500');
        }
      });
    }

    function openWhatsApp(message) {
      const encoded = encodeURIComponent(message);
      const url = 'https://wa.me/' + WHATSAPP_NUMBER + '?text=' + encoded;
      window.open(url, '_blank');
    }

    // Botón: enviar pregunta con texto + nombre de producto
    const btnPregunta = document.getElementById('btn-whatsapp-pregunta');
    if (btnPregunta && textarea) {
      btnPregunta.addEventListener('click', function () {
        const userText = textarea.value.trim();
        const pregunta = userText || 'sdds';
        const message =
          '*Consulta sobre ' + PRODUCT_NAME + '*\n\n' +
          'Hola, tengo la siguiente pregunta: ' + pregunta + '\n\n' +
          'Producto: ' + PRODUCT_NAME;
        openWhatsApp(message);
      });
    }

    // Botón: consulta general
    const btnGeneral = document.getElementById('btn-whatsapp-general');
    if (btnGeneral) {
      btnGeneral.addEventListener('click', function () {
        const message = 'Hola, tengo una consulta sobre el ' + PRODUCT_NAME;
        openWhatsApp(message);
      });
    }
  })();
</script>